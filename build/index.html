<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="cache-control" content="no-cache" />

<input type=file onchange=doit(this.files[0])>
<audio ></audio>
<div id=pspace>n</pspace>

<script>
  pspace.innerHTML=new Date().toString()
//------------------------------------------- 
function doit(f) {
  var url=URL.createObjectURL(f)
  audio=document.getElementsByTagName("audio")[0]  
  audio.src=url
  audio.play()   
  document.getElementsByTagName("input")[0].outerHTML=''
  lastTouchTime=0
  audio.ontimeupdate=function(){
    var time=new Date().getTime()/1000
    if ((time-lastTouchTime)>60)
      audio.pause()
  } // audio.ontimeupdate
  setTouchListeners()
} // function doit()
//------------------------------------------- 
function setTouchListeners() {
  x=0
//------------------------------------------- 
  document.ontouchstart=function(e){
    lastTouchTime=new Date().getTime()/1000
    e.preventDefault();
    var touch=e.touches[0]
    touchX=touch.clientX
    touchY=touch.clientY
    touchXcnt=0; touchYcnt=0 ;
    touchId=touch.identifier
    pspace.innerHTML=touchX+":"+touchY+":"+touchId+"<hr>"//+pspace.innerHTML
   if (audio.paused) paused=true
     else paused=false
   audio.pause()    
   start=new Date().getTime()/1000
  } // touchstart
//------------------------------------------- 
  document.ontouchend=function(e) {
    if (touchXcnt==0){
     e.preventDefault()
     var end=new Date().getTime()/1000
     var dif=end-start
     dif=(Math.floor(100*dif))/100
     var longTouch=false
     if (dif>.3) longTouch=true
     if (longTouch) {audio.currentTime-=5; audio.play()}
       else {
          if (paused) {audio.currentTime-=.5; audio.play()}
            else audio.pause()
       } //else    
     pspace.innerHTML=(x++)+" : "+longTouch+" : "+audio.currentTime+"<hr>"//+pspace.innerHTML
    } // if touchXcnt==0
    else { // touchXcnt!=0
       if (touchXcnt>touchX) audio.currentTime+=10
       else if (touchXcnt<touchX) audio.currenTime-=10
      audio.play()
    } //else touchXcnt!=0
  } // touchend
//------------------------------------------- 
document.ontouchmove=function(e) {
  e.preventDefault()
  var touch=e.touches[0]
  if (touch.identifier==touchId){
    touchXcnt=touch.clientX
    touchYcnt=touch.clientY
     pspace.innerHTML="moving, good touch<hr>"//+pspace.innerHTML
    pspace.innerHTML=touchXcnt+":"+touchYcnt+"<hr>"//+pspace.innerHTML
    }
  else      pspace.innerHTML="moving, bad touch: "+touch.identifier+"<hr>"//+pspace.innerHTML

} // touchmove  
//------------------------------------------- 
} // function setTouchListners()       
//------------------------------------------- 
</script>
